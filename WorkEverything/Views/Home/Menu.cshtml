@model IEnumerable<TranninShop.Web.Models.ProductCategoryViewModel>

<div class="header-bottom">
    <div class="wrap">
        <!-- start header menu -->
        <ul class="megamenu skyblue">
            <li><a class="color1" href="#">Home</a></li>
            @foreach (var category in Model.Where(x => x.ParentID == null).Select((value, index) => new { value, index }))
            {
                var colorNumber = category.index + 2;
                var colorClass = "color" + colorNumber;

                var childCategories = Model.Where(x => x.ParentID == category.value.ID);
                var url = "/" + category.value.Alias + ".pc-" + category.value.ID + ".html";

                <li class="active grid">
                    <a class="@colorClass" href="@url">@category.value.Name</a>
                    @if (childCategories.Count() > 0)
                    {
                        <div class="megapanel">
                            <div class="row">
                                <div class="col1">
                                    <div class="h_nav">
                                        <h4>shop</h4>
                                        <ul>
                                            @foreach (var childCategory in childCategories)
                                            {
                                                var childUrl = "/" + childCategory.Alias + ".pc-" + childCategory.ID + ".html";
                                                <li><a href="@childUrl">@childCategory.Name</a></li>
                                            }
                                        </ul>
                                    </div>
                                </div>
                                <div class="col1">
                                    <div class="h_nav">
                                        <img src="~/Assets/client/images/nav_img1.jpg" alt="" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col2"></div>
                                <div class="col1"></div>
                                <div class="col1"></div>
                                <div class="col1"></div>
                                <div class="col1"></div>
                            </div>
                        </div>
                    }
                </li>
            }            
        </ul>
        <div class="clear"></div>
    </div>
</div>
